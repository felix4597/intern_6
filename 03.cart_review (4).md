# 장바구니 페이지 리뷰

## 1. 프로젝트 개요
- **프로젝트명:** 쇼킹 온라인 - 장바구니 페이지 개선
- **목적:**  
  기존 쇼핑몰이 상품 선택 직후 결제 페이지로 바로 이동하는 구조를 개선하고, 상품 비교와 선택을 위한 중간 단계로 장바구니 페이지를 추가하여 UX를 향상.
- **주요 기능:**  
  - 장바구니 목록 표시 (썸네일, 상품명, 옵션, 수량 조절, 가격 및 합계 금액)
  - 총 결제 금액 및 배송비 계산
  - 상품 삭제 기능
  - 결제 페이지로 이동
  - 뒤로가기 버튼을 통한 메인 상품 목록 페이지 이동
- **접속 가능한 페이지 URL:** [장바구니 페이지](https://intern6-three.vercel.app/cart)
- **참여 팀원:**
  - 성재현 – 문서 작성 및 개발

---

## 2. 개발 환경
- **프레임워크/언어:** React, TypeScript, TailwindCSS
- **주요 라이브러리:**
  - React Router (페이지 이동)
  - CryptoJS (결제 정보 암호화)
  - Vite (개발 서버 및 번들링)
- **설치 및 실행 방법:**
  ```bash
  git clone <레포지토리 주소>
  cd <폴더명>
  npm install
  npm run dev
  ```
- **환경 변수 설정:**
  - `.env` 파일에 다음 항목 설정
    ```env
    VITE_CRYPTO_KEY=<암호화 키>
    ```

---

## 3. 설치 및 실행 방법
1. 저장소를 클론하거나 압축 해제
2. 의존성 설치:
   ```bash
   npm install
   ```
3. 개발 서버 실행:
   ```bash
   npm run dev
   ```
4. 브라우저에서 [http://localhost:5173](http://localhost:5173) 접속

---

## 4. 컴포넌트 구조 (실제 코드 기반 상세)

### 라우팅 및 전역 흐름
- **`src/App.tsx`**
  - 라우트 구성:
    - `/` – 메인 상품 목록 페이지
    - `/products/:id` – 상품 상세 페이지
    - `/cart` – 장바구니 페이지
    - `/payment` – 결제 페이지
  - 전역 장바구니 상태: `useCartStorage` 훅으로 `localStorage(cartItems)`와 동기화
  - `handleAddToCart(product)` 로 장바구니에 추가 (동일 상품은 수량 +1)
  - 헤더에 `cartCount` 배지 전달

- **전역 타입/유틸**
  - `src/types.ts`: `CartItem` 인터페이스, `formatCurrency` 포맷터
  - `src/hooks/useCartStorage.ts`: 장바구니 상태의 영속화(로컬 스토리지) 및 초기 검증/정규화

---

### 페이지
- **ProductListPage**: 상품 목록 표시, 장바구니 담기 기능
- **ProductDetailPage**: 상품 상세 표시, 장바구니 담기 버튼
- **CartPage**:
  - 수량 변경, 선택 삭제, 전체 선택/해제, 뒤로가기(`navigate(-1)`), 결제 페이지 이동
  - 배송 정책 상수: **FREE_SHIPPING_THRESHOLD = 50,000원**, **SHIPPING_FLAT_FEE = 3,000원**
- **PaymentPage**:
  - 카드 등록/선택, AES 암호화 저장, 가상 결제 플로우

---

### 컴포넌트
- **Header**: 상단 고정, 장바구니 아이콘 및 카운트 표시
- **ProductCard**: 상품 이미지·정보·담기 버튼
- **결제 하위 컴포넌트**:
  - `CardRegistrationForm` + 5종 입력 컴포넌트
  - `CardList`: 카드 목록/선택
  - `PurchaseButton`: 결제 버튼
  - `FlippableCard`: 카드 시각 효과

---

### 데이터/스토리북
- **데이터**: `src/data/products.ts`, `src/data/cards.ts`
- **스토리북 실행**:
  ```bash
  npm run storybook
  ```
  - 접속: [http://localhost:6006](http://localhost:6006)

---

## 5. 테스트 방법과 스토리북 링크
- **테스트 명령어:**
  ```bash
  npm test
  ```
- **스토리북:** 로컬 실행 가능, 컴포넌트별 UI 확인 가능
- **기능 테스트 결과 ([https://intern6-three.vercel.app/cart](https://intern6-three.vercel.app/cart) 기준):**
  1. 장바구니 금액 계산 – 정상
  2. 배송비 정책(50,000원 미만 3,000원, 이상 무료) – 정상
  3. 뒤로가기 버튼 – 정상 (상품 목록으로 이동)
  4. 결제하기 버튼 – 정상 (결제창 표시, 카드 등록 및 가상 결제 가능)

---

## 6. 유의사항 및 알려진 이슈
- 결제 모듈 암호화 키 사용 방식 불일치:
  - `PaymentPage` → 환경변수(`VITE_CRYPTO_KEY`)
  - `CardList` → 하드코딩(`'my-secret-key'`)
  - 운영 전 일치화 필요
- 모바일 환경에서 일부 UI 요소 겹침 현상 있음

---

## 7. 추가 항목
- **참고자료:**
  - [Figma 디자인 시안](https://www.figma.com/design/DKeR5wR65RkxcAWReoBccl/%EC%9D%91%EC%9A%A9%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EB%94%94%EC%9E%90%EC%9D%B8-%EC%8B%9C%EC%95%88?node-id=1-131&p=f)
- **라이선스:** 사내 전용, 외부 배포 금지
